define(["require","exports","tslib","react","modules/clean/analytics","dig-components/typography","modules/core/i18n","modules/clean/profile_services/profile_services_link","modules/clean/profile_services/profile_services_constants","modules/clean/viewer","modules/clean/api_v2/user_client"],(function(e,t,r,o,i,n,s,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),c=r.__importDefault(c),t.importLinkText=s.intl.formatMessage({id:"9v3S0Q",defaultMessage:"Select from your Google contacts"}),t.ImportContactsLink=function(e){var s=e.launchImportModal,_=o.useState({".tag":"other"}),d=_[0],g=_[1];o.useEffect((function(){f(),i.TeamsWebActionsLogger.log("google_directory_import_link_shown")}),[]);var m=o.useMemo((function(){return function(e){return r.__awaiter(void 0,void 0,void 0,(function(){var t,o,n;return r.__generator(this,(function(r){switch(r.label){case 0:return e.preventDefault(),e.stopPropagation(),"not_connected"!==d[".tag"]?(s(),[2]):(t=new a.ProfileServicesLinkingHandler,o=l.Viewer.get_viewer().work_user,i.TeamsWebActionsLogger.log("google_directory_oauth_start"),[4,t.auth_service_with_user_promise(c.default.GOOGLE,o.id,"invite_members_modal","link_directory_members",a.AuthWindowOption.POP_UP)]);case 1:return n=r.sent(),a.ProfileServicesLinkingHandler.show_import_notifications(n),n.success?(i.TeamsWebActionsLogger.log("google_directory_oauth_success"),s()):i.TeamsWebActionsLogger.log("google_directory_oauth_fail",{failure_reason:n.err_msg?n.err_msg:"unspecified"}),[2]}}))}))}}),[s,d]),f=function(){return r.__awaiter(void 0,void 0,void 0,(function(){var e,t,o;return r.__generator(this,(function(r){switch(r.label){case 0:return e=l.Viewer.get_viewer(),[4,(new u.UserApiV2Client).ns("domain_contacts").rpc("check_status",void 0,{subjectUserId:e.work_user.id})];case 1:return t=r.sent(),o=t.import_statuses.findIndex((function(e){return"google"===e.service[".tag"]})),g(-1===o?{".tag":"not_connected"}:t.import_statuses[o].status),[2]}}))}))};return"other"===d[".tag"]?null:o.default.createElement("div",{className:"invite-modal__invite-from-gsuite-link"},o.default.createElement(n.Link,{href:"",hasNoUnderline:!0,onClick:m},t.importLinkText))}}));
//# sourceMappingURL=import_contacts_link.min.js-vflKJBPO-.map